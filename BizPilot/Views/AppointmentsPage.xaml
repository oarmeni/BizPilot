<Page x:Class="BizPilot.Views.AppointmentsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{DynamicResource PrimaryBackgroundBrush}"
      Foreground="{DynamicResource PrimaryForegroundBrush}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10" VerticalAlignment="Top">
            <!-- SearchBox με μεγεθυντικό φακό -->
            <Border CornerRadius="6" Background="White" BorderBrush="DodgerBlue" BorderThickness="1.5" Width="250" Height="32" Margin="0,0,10,0">
                <DockPanel>
                    <Image Source="/Images/search_icon.png" Width="16" Height="16" Margin="6,0" VerticalAlignment="Center" DockPanel.Dock="Left"/>
                    <TextBox x:Name="SearchBox" Background="Transparent" BorderThickness="0" VerticalAlignment="Center"
                             FontSize="14" Foreground="Gray" Padding="2" TextChanged="SearchBox_TextChanged"/>
                </DockPanel>
            </Border>

            <!-- Φίλτρο Κατάστασης -->
            <ComboBox x:Name="StatusFilterComboBox"
                Width="120"
                Margin="0,0,10,0"
                Padding="6,2"
                FontSize="14"
                Background="White"
                BorderBrush="DodgerBlue"
                BorderThickness="1.5"
                Foreground="Black"
                VerticalContentAlignment="Center"
                SelectionChanged="StatusFilterComboBox_SelectionChanged"> 
                <ComboBoxItem Content="Όλα" IsSelected="True"/>
                <ComboBoxItem Content="Επερχόμενα"/>
                <ComboBoxItem Content="Ολοκληρωμένα"/>
                <ComboBoxItem Content="Ακυρωμένα"/>
            </ComboBox>

            <Button Content="➕ Νέο Ραντεβού"
                    Click="AddAppointment_Click"
                    Style="{StaticResource MainButtonStyle}"
                    MinWidth="160"
                    Padding="10,6"
                    Height="30"/>
        </StackPanel>
        <DataGrid x:Name="AppointmentsGrid"
                  Grid.Row="1"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  MouseDoubleClick="AppointmentsGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Πελάτης" Binding="{Binding CustomerName}" Width="*"/>
                <DataGridTextColumn Header="Ημερομηνία" Binding="{Binding AppointmentDate, StringFormat=dd/MM/yyyy}" Width="*"/>
                <DataGridTextColumn Header="Ώρα" Binding="{Binding AppointmentTime}" Width="*"/>
                <DataGridTextColumn Header="Κατάσταση" Binding="{Binding Status}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>
